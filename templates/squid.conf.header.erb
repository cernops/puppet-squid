#
# squid.conf.header.erb file fragment generated with puppet.
#

cache_mem                     <%= @cache_mem %>

<% unless @memory_cache_shared.nil? -%>
memory_cache_shared           <%= (@memory_cache_shared == 'on' || @memory_cache_shared == true)?'on':'off' %>

<% end -%>
maximum_object_size_in_memory <%= @maximum_object_size_in_memory %>

<% if @cache_replacement_policy -%>
cache_replacement_policy      <%= @cache_replacement_policy %>
<% end -%>
<% if @memory_replacement_policy -%>
memory_replacement_policy     <%= @memory_replacement_policy %>
<% end -%>

<% if @logformat -%>
  <%- [@logformat].flatten.each do |logformat_line| -%>
logformat                     <%= logformat_line %>
  <%- end -%>
<% end -%>
<% unless @buffered_logs.nil? -%>
buffered_logs                 <%= @buffered_logs?'on':'off' %>
<% end -%>

<% if @coredump_dir -%>
coredump_dir                  <%= @coredump_dir %>

<% end -%>

<% if @error_directory -%>
error_directory               <%= @error_directory %>
<% end -%>
<% if @err_page_stylesheet -%>
err_page_stylesheet           <%= @err_page_stylesheet %>
<% end -%>

<% if @max_filedescriptors -%>
max_filedescriptors           <%= @max_filedescriptors %>

<% end -%>
<% if @workers -%>
workers                       <%= @workers %>

<% end -%>

<% if @snmp_incoming_address -%>
snmp_incoming_address         <%= @snmp_incoming_address %>
<% end -%>
<% if @visible_hostname -%>
visible_hostname              <%= @visible_hostname %>
<% end -%>
<% unless @via.nil? -%>
via                           <%= @via?'on':'off' %>
<% end -%>
<% unless @httpd_suppress_version_string.nil? -%>
httpd_suppress_version_string <%= @httpd_suppress_version_string?'on':'off' %>
<% end -%>
<% if [true, false].include? @forwarded_for -%>
forwarded_for                 <%= @forwarded_for?'on':'off' %>
<% elsif !@forwarded_for.nil? -%> 
forwarded_for                 <%= @forwarded_for %>
<% end -%>

<% if @url_rewrite_program -%>
url_rewrite_program <%= @url_rewrite_program %>
<% if @url_rewrite_children -%>
url_rewrite_children <%= @url_rewrite_children %> <%= @url_rewrite_child_options%>
<% end -%>
<% end -%>
